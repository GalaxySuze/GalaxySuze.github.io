<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>张阿简博客</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="description" content="Kill Time, Or Kiss Time"/>
<meta name="keywords" content="Kill Time, Or Kiss Time"/>
<link rel="shortcut icon" href="https://zhangajian.com/favicon.ico">
<link rel="stylesheet" href="https://zhangajian.com/styles/main.css">


<!-- Comment -->

    
        <link href="https://cdn.bootcss.com/gitalk/1.5.0/gitalk.min.css" rel="stylesheet">
    

    


<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">


    <!-- 百度统计 -->
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?e0f2380f55bc7efe3789f3e070e5d99a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



</head>
<body class="post-template">
<div id="page" class="site">

    <header class="site-header">
    <h1 class="site-title"><a href="https://zhangajian.com">张阿简博客</a></h1>
    <a class="sidebar-toggle"><span class="screen-reader-text">Menu</span><span class="icon" aria-hidden="true"></span></a>
</header>

<aside class="sidebar">
    <div class="sidebar-scrollable">
        <div class="inner">
            <div class="widget-area">
                <!-- 菜单 -->
                <nav class="site-navigation">
                    <h2>张阿简博客</h2>
                    <ul class="menu">
                        
                            <li class="menu-item home current-menu-item">
                                <a href="/"
                                
                                >首页</a>
                            </li>
                        
                            <li class="menu-item home current-menu-item">
                                <a href="/archives"
                                
                                >归档</a>
                            </li>
                        
                            <li class="menu-item home current-menu-item">
                                <a href="https://zhangajian.com/tags"
                                
                                >标签</a>
                            </li>
                        
                    </ul>
                </nav>

                <section class="widget widget-about">
                    <h2 class="widget-title">关于</h2>
                    <p>Kill Time, Or Kiss Time</p>
                </section>

                <section class="widget widget-tags">
                    <h2 class="widget-title">标签</h2>
                    <div class="tagcloud">
                        
                            <a href="https://zhangajian.com/tag/-6RH_hF5V" class="button">
                                Gridea
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/ISfc6GmDv1" class="button">
                                主题
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/wa6VE0See" class="button">
                                原创
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/FUUIh5fRu" class="button">
                                阅读
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/fb3yEkNaz" class="button">
                                Supervisor
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/laravel" class="button">
                                Laravel
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/TnE9j9p54" class="button">
                                生活
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/2Lrsz8nQ5" class="button">
                                Java
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/linux" class="button">
                                Linux
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/Q1TPBCeTZ" class="button">
                                Minecraft
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/screen" class="button">
                                screen
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/R9XMeHPGI" class="button">
                                Mac
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/7GuO-rABn" class="button">
                                Certbot
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/32-ELgkvl" class="button">
                                HTTPS
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/nginx" class="button">
                                Nginx
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/gWr_Ce0M-" class="button">
                                PHP
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/WU4oQ_US9" class="button">
                                WordPress
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/zpAo_gez-" class="button">
                                Mysql
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/XljxheWyB" class="button">
                                Composer
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/Zo5YAjmh-" class="button">
                                设计模式
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                            <a href="https://zhangajian.com/tag/f8yREx6Zn" class="button">
                                Redis
                                <span aria-hidden="true"><span class="line left"></span><span class="line top"></span><span class="line right"></span><span class="line bottom"></span></span>
                            </a>
                        
                    </div>
                </section>

            </div>
            <a class="sidebar-toggle"><span class="screen-reader-text">Close</span><span class="icon" aria-hidden="true"></span></a>
        </div>
    </div>
</aside>


    <main class="site-main">
        <div class="site-content">
            <article class="post tag-getting-started">
                <header class="cover post-header">
                    <div class="cover-bg" >

                        
                            <img srcset="https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/c-51.jpeg 300w, https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/c-51.jpeg 600w, https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/c-51.jpeg 800w, https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/c-51.jpeg 1600w, https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/c-51.jpeg 2000w"
                                 sizes="100vw" src="https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/c-51.jpeg" alt="通过Certbot安装Let&#39;s Encrypt证书实现全站的HTTPS访问"/>
                        

                    </div>
                    <div class="cover-content">
                        <div class="inner">
                            <div class="post-tags">
                                
                                    
                                        <a href="https://zhangajian.com/tag/7GuO-rABn">Certbot&nbsp;&nbsp;</a>
                                    
                                        <a href="https://zhangajian.com/tag/32-ELgkvl">HTTPS&nbsp;&nbsp;</a>
                                    
                                        <a href="https://zhangajian.com/tag/nginx">Nginx&nbsp;&nbsp;</a>
                                    
                                        <a href="https://zhangajian.com/tag/linux">Linux&nbsp;&nbsp;</a>
                                    
                                        <a href="https://zhangajian.com/tag/wa6VE0See">原创&nbsp;&nbsp;</a>
                                    
                                
                            </div>
                            <h1 class="post-title">通过Certbot安装Let&#39;s Encrypt证书实现全站的HTTPS访问</h1>
                            <div class="post-meta">
                                <span class="post-meta-wrap">
                                    <img class="author-avatar"
                                         srcset="https://zhangajian.com/media/images/avatar.png, https://zhangajian.com/media/images/avatar.png 2x"
                                         src="https://zhangajian.com/media/images/avatar.png" alt=""/>
                                    <span class="post-author">2863字</span>
                                    <time class="published" datetime="2018-11-17">2018-11-17</time>
                                </span>
                                <div>12 min read</div>
                            </div>
                            <a href="#post-content" class="arrow-down" data-scroll><span class="screen-reader-text">Scroll Down</span></a>
                        </div>
                    </div>
                </header>
                <div class="inner">

                    <div id="post-content" class="post-content">
                        <h1 id="相关知识">相关知识</h1>
<h3 id="httphttps-是什么">HTTP/HTTPS 是什么?</h3>
<blockquote>
<p>简单来说，HTTP 是一个传输网页内容的协议，比如我们浏览一个网页，网页上的文字、图片、 CSS 、 JS 等文件都是通过 HTTP 协议传输到我们的浏览器，然后被我们看到。因为 HTTP 是明文传输的，通过 HTTP 协议传输的内容很容易被偷看和篡改，为了安全（你肯定不想被人偷看或者篡改网页内容吧，比如网站银行密码什么的。）就为 HTTP 协议再加上了一层 SSL/TLS 安全协议，所以就有了 HTTPS 。</p>
</blockquote>
<h3 id="ssltls-是什么">SSL/TLS 是什么？</h3>
<blockquote>
<p>SSL 是指安全套接字层（Secure Sockets Layer），内心纯洁的同学也可以理解为「带安全套的 HTTP」，因为带了安全套，所以当然会比较安全。TLS 是 传输层安全协议（Transport Layer Security），SSL 和 TLS 是同一个东西的不同阶段，理解为同一个东西也行，都是安全协议就对了。</p>
</blockquote>
<h3 id="为什么要部署-https">为什么要部署 HTTPS？</h3>
<blockquote>
<p>说到底，就是 HTTPS 更安全。甚至为了安全，一个专业可靠的网站， HTTPS 是必须的。 Firefox 和 Chrome 都计划将没有配置 SSL 加密的 HTTP 网站标记为不安全，目前它们也正在联合其他相关的基金会与公司推动整个互联网 HTTPS 化，现在大家访问的一些主要的网站。如 Google 多年前就已经全部启用 HTTPS ，国内的淘宝、搜狗、知乎、百度等等也全面 HTTPS 了。甚至 Google 和百度的搜索结果也正在给予 HTTPS 的网站更高的排名和优先收录权。</p>
</blockquote>
<h3 id="怎么部署-https-呢">怎么部署 HTTPS 呢？</h3>
<blockquote>
<p>你只需要有一张被信任的 CA （ Certificate Authority ）也就是证书授权中心颁发的 SSL 安全证书，并且将它部署到你的网站服务器上。一旦部署成功后，当用户访问你的网站时，浏览器会在显示的网址前加一把小绿锁，表明这个网站是安全的，当然同时你也会看到网址前的前缀变成了 HTTPS ，不再是 HTTP 了。</p>
</blockquote>
<h3 id="怎么获得-ssl-安全证书呢">怎么获得 SSL 安全证书呢？</h3>
<blockquote>
<p>理论上，我们自己也可以签发 SSL 安全证书，但是我们自己签发的安全证书不会被主流的浏览器信任，所以我们需要被信任的证书授权中心（ CA ）签发的安全证书。而一般的 SSL 安全证书签发服务都比较贵，比如 Godaddy 、 GlobalSign 等机构签发的证书一般都需要20美金一年甚至更贵，不过为了加快推广 HTTPS 的普及， EEF 电子前哨基金会、 Mozilla 基金会和美国密歇根大学成立了一个公益组织叫 ISRG （ Internet Security Research Group ），这个组织从 2015 年开始推出了 Let’s Encrypt 免费证书。这个免费证书不仅免费，而且还相当好用，所以我们就可以利用 Let’s Encrypt 提供的免费证书部署 HTTPS 了。</p>
</blockquote>
<h3 id="lets-encrypt-简介">Let’s Encrypt 简介</h3>
<blockquote>
<p>前面已经介绍过， Let’s Encrypt 是 一个叫 ISRG （ Internet Security Research Group ，互联网安全研究小组）的组织推出的免费安全证书计划。参与这个计划的组织和公司可以说是互联网顶顶重要的先驱，除了前文提到的三个牛气哄哄的发起单位外，后来又有思科（全球网络设备制造商执牛耳者）、 Akamai 加入，甚至连 Linux 基金会也加入了合作，这些大牌组织的加入保证了这个项目的可信度和可持续性。</p>
</blockquote>
<h3 id="certbot-简介">Certbot 简介</h3>
<blockquote>
<p>ISRG 的发起者 EFF （电子前哨基金会）为 Let’s Encrypt 项目发布了一个官方的客户端 Certbot ，利用它可以完全自动化的获取、部署和更新安全证书。虽然第三方工具也可以使用，但是官方工具更权威，风险也更小，而且遇到问题也更容易解决，毕竟有官方的支持。</p>
</blockquote>
<h1 id="实际操作">实际操作</h1>
<h3 id="certbot-使用方法">Certbot 使用方法</h3>
<p>Certbot 的官网是<a href="https://certbot.eff.org/">https://certbot.eff.org/</a>, 我们打开这个链接，选择自己使用的 web server 和操作系统。选择完之后，官网就会显示出对应的安装操作步骤。<br>
以目前我所使用的服务器为例，web server 使用Nginx(1.12)，操作系统是CentOS(7.3)。因为 Certbot 打包在EPEL中，所以在安装 Certbot 之前要先安装EPEL</p>
<pre><code>yum -y install epel-release
</code></pre>
<p>然后按着官网给出的步骤提示命令安装 Certbot</p>
<pre><code>yum install python2-certbot-nginx
</code></pre>
<p>安装完毕后，继续输入官网提示命令</p>
<pre><code>certbot --nginx
</code></pre>
<p>运行此命令会自动获取证书，并且 Certbot 会自动编辑Nginx配置文件配置HTTPS服务。</p>
<blockquote>
<p>这边在运行配置命令时遇到一个坑</p>
</blockquote>
<pre><code>ImportError: No module named 'requests.packages.urllib3'
</code></pre>
<p>可以看出是缺少一个模块包，看配置命令在命令台的输出，Certbot 是用 python 来写 Nginx 配置。既然是用的 python，可以通过 <strong>pip list</strong> 命令查看 python 的依赖包列表。但是查看是已经存在的，这个问题很快通过 Certbot 在 github 上的一个 Issues 找到了答案（<a href="https://github.com/certbot/certbot/issues/5104">Issues链接</a>）。目前看是包的版本依赖有问题，执行以下命令进行依赖包的重装</p>
<pre><code>pip uninstall requests
pip uninstall urllib3
yum remove python-urllib3
yum remove python-requests
yum install python-urllib3
yum install python-requests
yum install certbot
</code></pre>
<p>再次执行 <strong>certbot --nginx</strong> 命令成功。命令执行后首先会提示输入一个邮箱地址，主要作用是订阅一些通知，输入后回车。</p>
<pre><code>[root@izuf6fco0zwyipdq9485s2z ~]# certbot --nginx
Saving debug log to /var/log/letsencrypt/letsencrypt.log
Plugins selected: Authenticator nginx, Installer nginx

▽
Enter email address (used for urgent renewal and security notices) (Enter 'c' to
cancel): demo@mail.com // 演示邮箱
Starting new HTTPS connection (1): acme-v02.api.letsencrypt.org

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
</code></pre>
<p>回车后 Certbot 就会自动请求下载 Let's Encrypt 证书，并设置 Nginx 配置文件。期间会有一些同意相关协议和选择哪个网站配置的交互，这个看输出文字就能明白意思。</p>
<pre><code>...
▽
server {
(A)gree/(C)ancel: a

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Would you be willing to share your email address with the Electronic Frontier
Foundation, a founding partner of the Let's Encrypt project and the non-profit
organization that develops Certbot? We'd like to send you email about our work
encrypting the web, EFF news, campaigns, and ways to support digital freedom.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
(Y)es/(N)o: y
Starting new HTTPS connection (1): supporters.eff.org

Which names would you like to activate HTTPS for?
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
1: kisstime.top
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Select the appropriate numbers separated by commas and/or spaces, or leave input
blank to select all options shown (Enter 'c' to cancel): 1
Obtaining a new certificate
Performing the following challenges:
http-01 challenge for kisstime.top
Cleaning up challenges
...
</code></pre>
<blockquote>
<p>但是这边到 Certbot 设置 Nginx 配置文件的时候遇到一个坑，报如下一个错误</p>
</blockquote>
<pre><code>An unexpected error occurred:
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe5 in position 2: ordinal not in range(128)
Please see the logfiles in /var/log/letsencrypt for more details.
</code></pre>
<p>熟悉 python 的同学应该对这个错误比较了解。不过博主 python 还是用的比较少，花了点时间了解了一下。</p>
<blockquote>
<p>在解决错误之前，首先要了解unicode和utf-8的区别。unicode指的是万国码，是一种“字码表”。而utf-8是这种字码表储存的编码方法。unicode不一定要由utf-8这种方式编成bytecode储存，也可以使用utf-16,utf-7等其他方式。目前大多都以utf-8的方式来变成bytecode。其次，Python中字符串类型分为byte string 和 unicode string两种。如果在python文件中指定编码方式为utf-8(#coding=utf-8)，那么所有带中文的字符串都会被认为是utf-8编码的byte string（例如：mystr=&quot;你好&quot;），但是在函数中所产生的字符串则被认为是unicode string。问题就出在这边，unicode string 和 byte string 是不可以混合使用的，一旦混合使用了，就会产生这样的错误。例如：</p>
</blockquote>
<pre><code>self.response.out.write(&quot;你好&quot;+self.request.get(&quot;argu&quot;))
</code></pre>
<blockquote>
<p>其中，&quot;你好&quot;被认为是byte string，而self.request.get(&quot;argu&quot;)的返回值被认为是unicode string。由于预设的解码器是ascii，所以就不能识别中文byte string。然后就报错了。</p>
</blockquote>
<p>那理解了这个错误原因后，我这边首先想到的就是网站的 Nginx 配置文件中是否含有中文。打开一看，确实存在中文注释。将注释去掉，重新执行命令成功不在报错</p>
<p>接着命令交互会提示是否将所有HTTP重定向到HTTPS，我这边选择全部重定向也就是「2」。</p>
<pre><code>Cleaning up challenges
Deploying Certificate to VirtualHost:  //这边会显示你的网站配置文件目录

Please choose whether or not to redirect HTTP traffic to HTTPS, removing HTTP access.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
1: No redirect - Make no further changes to the webserver configuration.
2: Redirect - Make all requests redirect to secure HTTPS access. Choose this for
new sites, or if you're confident your site works on HTTPS. You can undo this
change by editing your web server's configuration.
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Select the appropriate number [1-2] then [enter] (press 'c' to cancel): 2
Redirecting all traffic on port 80 to ssl in //这边会显示你的网站配置文件目录

- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
Congratulations! You have successfully enabled https://kisstime.top

You should test your configuration at:
https://www.ssllabs.com/ssltest/analyze.html?d=kisstime.top
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -

IMPORTANT NOTES:
 - Congratulations! Your certificate and chain have been saved at:
   .../fullchain.pem
   Your key file has been saved at:
   .../privkey.pem
   Your cert will expire on 2019-02-14. To obtain a new or tweaked
   version of this certificate in the future, simply run certbot again
   with the &quot;certonly&quot; option. To non-interactively renew *all* of
   your certificates, run &quot;certbot renew&quot;
 - If you like Certbot, please consider supporting our work by:

   Donating to ISRG / Let's Encrypt:   https://letsencrypt.org/donate
   Donating to EFF:                    https://eff.org/donate-le
</code></pre>
<p>OK，当完成上面最后一步后，输入如上信息后就表明 HTTPS 配置成功了！我们可以通过提示中的 <a href="www.ssllabs.com">SSL Server Test</a> 网址来测试网站是否能够 HTTPS 来进行访问</p>
<pre><code>You should test your configuration at:
https://www.ssllabs.com/ssltest/analyze.html?d=kisstime.top
</code></pre>
<p>事实证明，高兴的太早了。。。通过测试网站和直接访问域名发现网站都是访问不了。思考了一下，确认下服务器的443端口是否开启，我这边用的是阿里云的服务器，登录控制台查看安全组规则，发现确实是443端口没有开启，配置开启后，重新访问成功。</p>
<h1 id="其他">其他</h1>
<h3 id="nginx的设置说明">Nginx的设置说明</h3>
<p>基本上 Certbot 会在对应的 Nginx 配置文件加上下面的参数：</p>
<pre><code>server {
    # ... other configs
    
    # SSL 设置
    listen 443 ssl;

    # set crt and key
    ssl_certificate .../fullchain.pem;
    ssl_certificate_key .../privkey.pem;
    
    # include 基本的 ssl 设置
    include .../options-ssl-nginx.conf;
    
    # Certbot 也会生成一把 Diffie-Hellman 密钥
    ssl_dhparam .../ssl-dhparams.pem;

    # ... other configs
}
</code></pre>
<h3 id="自动更新证书">自动更新证书</h3>
<p>Let’s Encrypt 免费SSL证书用起来非常方便，但每次申请只有三个月有效期，在每次到期之前都需要重新申请，Certbot 已经提供了一键续订的命令</p>
<pre><code>certbot renew
</code></pre>
<p>我们可以通过添加此条命令的cron作业（或systemd计时器）来安排证书的自动续订</p>
<pre><code>SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin

0 0,12 * * * certbot renew --quiet 
</code></pre>
<h3 id="certbot-的-log-路径">Certbot 的 log 路径</h3>
<p>Certbot 的 log 预设路径在 <strong>/var/log/letsencrypt</strong>，有需要可以去确认查看。</p>
<h3 id="相关第三方">相关第三方</h3>
<p><a href="https://github.com/certbot/certbot/blob/master/certbot-auto">certbot-auto</a>是对脚本certbot的封装，可以设置系统环境或自动升级。</p>
<h1 id="参考资料">参考资料</h1>
<p>牛顿曾经说过：如果说我看得比别人更远些，那是因为我站在巨人的肩膀上。（If I have seen further, it is by standing on the shoulders of giants.）感谢。</p>
<ul>
<li><a href="https://certbot.eff.org/">https://certbot.eff.org/</a></li>
<li><a href="https://linuxstory.org/deploy-lets-encrypt-ssl-certificate-with-certbot">https://linuxstory.org/deploy-lets-encrypt-ssl-certificate-with-certbot</a></li>
<li><a href="https://blog.csdn.net/use_my_heart/article/details/51303317">https://blog.csdn.net/use_my_heart/article/details/51303317</a></li>
<li><a href="https://blog.hellojcc.tw/2018/05/02/setup-https-with-letsencrypt-on-nginx/">https://blog.hellojcc.tw/2018/05/02/setup-https-with-letsencrypt-on-nginx/</a></li>
</ul>

                    </div>

                </div>
            </article>

            <section class="comments-area">
    <div class="inner">
        <h2 class="screen-reader-text">评论</h2>
        
            
                <div id="gitalk-container"></div>
            

            
        
    </div>
</section>


            
                <nav class="post-navigation">
                    <h2 class="screen-reader-text">Post navigation</h2>
                    <div class="nav-links">
                        <a href="https://zhangajian.com/post/mac-xia-iterm2-ssh-mian-mi-deng-lu-a-li-yun" class="nav-previous">
                            <div class="nav-bg" >
                                
                                    <img srcset="https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/c-61.jpg 300w, https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/c-61.jpg 600w, https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/c-61.jpg 800w, https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/c-61.jpg 1600w, https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/c-61.jpg 2000w" sizes="(max-width: 800px) 100vw, 50vw" src="https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/c-61.jpg" alt="图裂了"/>
                                
                            </div>
                            <div class="nav-inside">
                                <span class="nav-before">下一篇</span>
                                <span class="nav-title">Mac下iTerm2 SSH 免密登陆阿里云</span>
                                <span class="nav-date">2018-11-09</span>
                            </div>
                        </a>
                    </div>
                </nav>
            

        </div>
    </main>

    <footer class="site-footer">
    <div class="inner">
        <!-- 社交 -->
        <div class="offsite-links">
            
                
            
                
            
                
            
                
            
                
            
        </div>

        <div class="site-info">
            THEME BY <a href="https://github.com/GalaxySuze/gridea-theme-subtle-galaxy">Subtle Galaxy</a>, REFERENCE FROM <a href="https://subtle.justgoodthemes.com/">Subtle</a><br/>
            Powered by <a target="_blank" href="https://gridea.dev/">Gridea</a>, © 2016 - 2019 Copyright 张阿简. All Rights Reserved.
        </div>
        <a href="#page" class="arrow-up" data-scroll><span class="screen-reader-text">Back to the top</span></a>
    </div>
</footer>


</div>

<script src="https://zhangajian.com/media/scripts/_core/plugins.js"></script>
<script src="https://zhangajian.com/media/scripts/_core/custom.js"></script>

<!-- highlight -->
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>
<!-- Md5 Min JS -->
<script src="https://zhangajian.com/media/scripts/_vendors/md5.min.js"></script>

<script type="application/javascript">
    // 代码高亮
    hljs.initHighlightingOnLoad();

</script>



    
        <script src="https://cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js"></script>
        <script>

            var gitalk = new Gitalk({
                clientID: 'f82af725bc4967d0e195',
                clientSecret: 'ea48b3d1484e6658649b97c3de3dd33e0ca89a64',
                repo: 'ZhangAJianBlogGitalk',
                owner: 'GalaxySuze',
                admin: ['GalaxySuze'],
                id: md5(location.pathname),      // Ensure uniqueness and length less than 50
                distractionFreeMode: false  // Facebook-like distraction free mode
            })

            gitalk.render('gitalk-container')

        </script>
    

    





</body>
</html>
