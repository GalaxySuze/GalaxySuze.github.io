<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>张阿简博客</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

<meta name="description" content="Kill Time, Or Kiss Time"/>
<meta name="keywords" content="Kill Time, Or Kiss Time"/>

<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
<link rel="shortcut icon" href="https://www.zhangajian.com/favicon.ico">

<link rel="stylesheet" href="https://www.zhangajian.com/styles/main.css">

<!-- Modernizr JS -->
<script src="https://www.zhangajian.com/media/scripts/modernizr-2.6.2.min.js"></script>
<!-- FOR IE9 below -->
<!--[if lt IE 9]>
<scripts src="https://www.zhangajian.com/media/scripts/respond.min.js"></scripts>
<![endif]-->

<!-- Comment -->

    
        <link href="https://cdn.bootcss.com/gitalk/1.5.0/gitalk.min.css" rel="stylesheet">
    

    



<!-- katex -->
<!--<link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet">-->

<link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">


    <!-- 百度统计 -->
    <script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?e0f2380f55bc7efe3789f3e070e5d99a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



</head>
<body>
    <div id="fh5co-offcanvas">
    <a href="#!" class="fh5co-close-offcanvas js-fh5co-close-offcanvas">
        <span><i class="icon-cross3"></i> <span>Close</span></span>
    </a>
    <div class="fh5co-bio">
        <figure>
            <img src="https://www.zhangajian.com/media/images/avatar.png" alt="张阿简博客"
                 class="img-responsive">
        </figure>
        <a href="https://www.zhangajian.com/post/about/"><h3 class="heading">ABOUT ME</h3></a>
        <h2>张阿简博客</h2>
        <p>Kill Time, Or Kiss Time</p>
        <ul class="fh5co-social">
            
                <li>
                    
                        <a href="https://github.com/GalaxySuze" target="_blank">
                            <i class="fab fa-github"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
                <li>
                    
                        <a href="https://www.weibo.com/helloworldvick" target="_blank">
                            <i class="fab fa-weibo"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                        <a href="https://www.zhihu.com/people/su-suze/activities" target="_blank">
                            <i class="fab fa-zhihu"></i>
                        </a>
                    
                </li>
            
                <li>
                    
                </li>
            
        </ul>
    </div>

    <div class="fh5co-menu">

        <!-- 标签 -->
        <div class="fh5co-box">
            <a href="https://www.zhangajian.com/tags/"><h3 class="heading">👉标签</h3></a>
            <ul>
                
                    <li><a href="https://www.zhangajian.com/tag/wa6VE0See/">原创</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/TnE9j9p54/">生活</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/R9XMeHPGI/">Mac</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/-9el9FFuM/">PHPStorm</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/L31qriw3_/">Git</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/nOv_65H_U/">Postman</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/sfluukB2E/">Websocket</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/32-ELgkvl/">HTTPS</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/-6RH_hF5V/">Gridea</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/ISfc6GmDv1/">主题</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/FUUIh5fRu/">阅读</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/fb3yEkNaz/">Supervisor</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/laravel/">Laravel</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/2Lrsz8nQ5/">Java</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/linux/">Linux</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/Q1TPBCeTZ/">Minecraft</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/screen/">screen</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/7GuO-rABn/">Certbot</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/nginx/">Nginx</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/gWr_Ce0M-/">PHP</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/WU4oQ_US9/">WordPress</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/zpAo_gez-/">Mysql</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/XljxheWyB/">Composer</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/Zo5YAjmh-/">设计模式</a></li>
                
                    <li><a href="https://www.zhangajian.com/tag/f8yREx6Zn/">Redis</a></li>
                
            </ul>
        </div>
    </div>
</div>

<header id="fh5co-header">
    <div class="container-fluid">
        <div class="row">
            <a href="#" class="js-fh5co-nav-toggle fh5co-nav-toggle"><i></i></a>
            <ul class="fh5co-social">
                
                    <li>
                        <a href="/"
                        >
                            首页
                        </a>
                    </li>
                
                    <li>
                        <a href="/archives"
                        >
                            归档
                        </a>
                    </li>
                
                    <li>
                        <a href="https://zhangajian.com/post/tu-lang/"
                        >
                            图廊
                        </a>
                    </li>
                
                    <li>
                        <a href="https://zhangajian.com/post/you-lian/"
                        >
                            友链
                        </a>
                    </li>
                
            </ul>
            <div class="col-lg-12 col-md-12 text-center">
                <h1 id="fh5co-logo">
                    <a href="https://www.zhangajian.com">张阿简博客 </a>
                </h1>
            </div>
        </div>
    </div>
</header>


    <!--  <a href="#" class="fh5co-post-prev"><span>👈 Prev</span></a>-->
    <!--  <a href="#" class="fh5co-post-next"><span>Next 👉</span></a>-->

    <!-- 等gridea出自定义页面功能再优化一下 -->
    
        <div class="container-fluid">
    <div class="row fh5co-post-entry single-entry">
        <article class="col-lg-8 col-lg-offset-2 col-md-8 col-md-offset-2 col-sm-8 col-sm-offset-2 col-xs-12 col-xs-offset-0">
            <figure class="animate-box">
                
                    <img src="https://blog-img-hosting.oss-cn-shanghai.aliyuncs.com/blog/article_cover/art_cover_21.jpeg" alt="在Linux下搭建我的世界(Minecraft)服务器" class="img-responsive">
                
            </figure>
            <span class="fh5co-meta animate-box">
                
                    <div class="tag-container">
                        
                            <a href="https://www.zhangajian.com/tag/2Lrsz8nQ5/" class="tag">Java, </a>
                        
                            <a href="https://www.zhangajian.com/tag/linux/" class="tag">Linux, </a>
                        
                            <a href="https://www.zhangajian.com/tag/Q1TPBCeTZ/" class="tag">Minecraft, </a>
                        
                            <a href="https://www.zhangajian.com/tag/screen/" class="tag">screen, </a>
                        
                            <a href="https://www.zhangajian.com/tag/wa6VE0See/" class="tag">原创, </a>
                        
                    </div>
                
            </span>
            <h2 class="fh5co-article-title animate-box">在Linux下搭建我的世界(Minecraft)服务器</h2>
            <ol class="breadcrumb fh5co-meta fh5co-date animate-box" style="margin-bottom:0; background-color:#f8f9fa">
                <li>2018-12-21</li>
                <li>1820字</li>
                <li>7 min read</li>
            </ol>

            <div class="col-lg-12 col-lg-offset-0 col-md-12 col-md-offset-0 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0 text-left content-article">
                <div class="row">
                    <div class="col-md-12 animate-box post-content">
                        <p> <blockquote>
<p>最近薅了百度云双12的羊毛，1核2G一年150。突然想起以前大学整个宿舍通宵开黑挖泥土的岁月，所以刚好趁着这台服务器，打算自己搭建一个我的世界服务器，重温一下以前的感觉。</p>
</blockquote>
<!-- more -->
<h1 id="系统要求">系统要求</h1>
<p>google到的MC系统要求</p>
<ul>
<li>CPU：双核</li>
<li>内存：20-40人<strong>2GB</strong>，30-60人<strong>3GB</strong>，60+人<strong>8GB</strong></li>
</ul>
<p>上面就是服务器端的需求，如果只是和小伙伴们一起玩，也并不需要多优秀的服务器。下面是我的配置</p>
<ul>
<li>CPU：单核</li>
<li>内存：2G</li>
<li>Linux系统：CentOS 7.3 x86_64</li>
</ul>
<h1 id="安装java">安装Java</h1>
<p>MC是用Java写的（当然现在也有别的语言写的版本），由于服务器端的MC是一个jar包，我们在配置之后通过运行jar包来开启服务器端，同时我们在客户端上打开后通过IP地址即可搜索并进入服务器。所以我们首先要先安装Java。通过下面的方法来安装：</p>
<pre><code>yum install -y java-1.8.0-openjdk
</code></pre>
<h1 id="下载mc服务器端">下载MC服务器端</h1>
<p>这里有一个要求，就是你和你的小伙伴要拥有同样版本的MC。不同的版本对应着不同的服务器端，所以我们要下载正确的版本。如何看MC版本呢，一般进入游戏后，游戏左下角会有版本显示。知道了版本号，那么用命令就可以下载对应版本的服务器端了。需要根据版本号补全命令格式：</p>
<pre><code>wget https://s3.amazonaws.com/Minecraft.Download/versions/&lt;你要下载的版本号&gt;/minecraft_server.&lt;你要下载的版本号&gt;.jar

</code></pre>
<p>例子：博主这边选择安装了比较稳定的1.12版本</p>
<pre><code>wget https://s3.amazonaws.com/Minecraft.Download/versions/1.12/minecraft_server.1.12.jar
</code></pre>
<p>等下载提示结束后，minecraft_server.1.12.jar就躺在当前目录了。</p>
<h1 id="mc服务器启动">MC服务器，启动！</h1>
<p>我们就可以使用命令来运行MC服务器：</p>
<pre><code>java -Xms[初始启动分配内存] -Xmx[最大分配内存] -jar [jar包所在路径]/minecraft_server.[版本号].jar nogui
</code></pre>
<p>例子：</p>
<pre><code>java -Xms256m -Xmx512m -jar /home/mc/minecraft_server.1.12.jar nogui
</code></pre>
<blockquote>
<p>关于命令最后一个参数 nogui，是分开的单词 no gui，意思是不需要图形界面，这样会大大减小内存的使用，如果你的Linux是有图形界面的，就可以不打这个 nogui。</p>
</blockquote>
<h1 id="启动成功">启动成功</h1>
<p>上面的命令输入完成后，等待参数由0%一直到100%就启动完成啦！下面给出博主启动完成的后几行显示：</p>
<pre><code>[05:58:08] [Server thread/INFO]: Loaded 488 advancements
[05:58:08] [Server thread/INFO]: Preparing start region for level 0
[05:58:09] [Server thread/INFO]: Preparing spawn area: 0%
[05:58:10] [Server thread/INFO]: Preparing spawn area: 41%
[05:58:11] [Server thread/INFO]: Preparing spawn area: 76%
[05:58:11] [Server thread/INFO]: Done (4.263s)! For help, type &quot;help&quot; or &quot;?&quot;
</code></pre>
<h1 id="mcshell脚本启动">MC，Shell脚本启动！</h1>
<p>我们如果一直使用上面那一句启动的话是不是非常麻烦！每次都要复制粘贴，那么我们可以写一个简单的Shell脚本，放在jar包所在目录，每次启动的时候直接启动脚本就能进入游戏了。</p>
<pre><code>vim start-game.sh
</code></pre>
<p>编辑内容如下：</p>
<pre><code>#!/bin/sh

java -Xms256m -Xmx512m -jar /home/mc/minecraft_server.1.12.jar nogui
</code></pre>
<p>保存退出，每次启动游戏只需要运行下面命令即可:</p>
<pre><code>bash start-game.sh
</code></pre>
<h1 id="mc服务器关闭">MC服务器，关闭！</h1>
<p>按 Ctrl + C 来停止当前服务器</p>
<h1 id="mc服务起最常见的启动失败">MC服务起最常见的启动失败</h1>
<p>我们在第一次运行完jar包后，无论是否运行成功，都能发现当前目录下多出了一堆文件，运行失败的时候其实就是配置除了一点问题。我们在当前目录找一下文件：<strong>eula.txt</strong></p>
<pre><code>vim eula.txt
</code></pre>
<p>按i键进入编辑模式，找到如下一行把 <strong>false</strong> 改为 <strong>true</strong></p>
<pre><code>eula=false
</code></pre>
<p>保存退出</p>
<ul>
<li>按 <strong>esc</strong></li>
<li>输入 <strong>:wq</strong></li>
</ul>
<h1 id="客户端连接mc服务器失败">客户端连接MC服务器失败</h1>
<p>上面都启动成功之后，就可以下载对应服务器版本的客户端。下载好后启动，点击多人游戏，添加服务器，服务器地址输入我们云服务器的公网IP，就可连接上去愉快的玩耍了。但是这时候可能会发现就是怎么连接都失败，如果遇到这个情况，我们需要检查下服务器配置文件，先在jar包目录下找到文件server.propertices 并编辑：</p>
<pre><code>vim server.propertices
</code></pre>
<p>找到这一行</p>
<pre><code>online-mode:true
</code></pre>
<p>将true改为false，这是正版验证服务的设置<br>
关于 <strong>server.propertices</strong> 文件，这边就不多做介绍了，可通过下面的链接了解详情</p>
<ul>
<li><a href="http://www.mcbbs.net/thread-569077-1-1.html">服务器配置文件详细设置</a></li>
<li><a href="https://minecraft-zh.gamepedia.com/Server.properties">我的世界WiKi</a></li>
</ul>
<h1 id="保持服务会话">保持服务会话</h1>
<p>因为博主用的是云服务器，需要通过使用ssh工具来连接到服务器启动游戏服务，但是一般服务器和ssh工具都会有连接会话的超时设置，在一段时间没有在服务器上操作后，会自动断开ssh会话，这时这个会话中的任务就会被杀掉，那小伙伴们游戏玩着玩着就<strong>与服务器断开连接</strong>了。<br>
这个时候我们可以使用Linux上这个 <strong>GNU Screen</strong> 工具来解决上述问题</p>
<blockquote>
<p>GNU Screen是一款由GNU计划开发的用于命令行终端切换的自由软件。用户可以通过该软件同时连接多个本地或远程的命令行会话，并在其间自由切换。GNU Screen可以看作是窗口管理器的命令行界面版本。它提供了统一的管理多个会话的界面和相应的功能。</p>
</blockquote>
<h4 id="安装-screen">安装 screen</h4>
<pre><code>yum install -y screen
</code></pre>
<h4 id="语法">语法：</h4>
<p>screen [-AmRvx -ls -wipe][-d &lt;作业名称&gt;][-h &lt;行数&gt;][-r &lt;作业名称&gt;][-s ][-S &lt;作业名称&gt;]</p>
<p>参数说明</p>
<ul>
<li>-A 　将所有的视窗都调整为目前终端机的大小。</li>
<li>-d &lt;作业名称&gt; 　将指定的screen作业离线。</li>
<li>-h &lt;行数&gt; 　指定视窗的缓冲区行数。</li>
<li>-m 　即使目前已在作业中的screen作业，仍强制建立新的screen作业。</li>
<li>-r &lt;作业名称&gt; 　恢复离线的screen作业。</li>
<li>-R 　先试图恢复离线的作业。若找不到离线的作业，即建立新的screen作业。</li>
<li>-s 　指定建立新视窗时，所要执行的shell。</li>
<li>-S &lt;作业名称&gt; 　指定screen作业的名称。</li>
<li>-v 　显示版本信息。</li>
<li>-x 　恢复之前离线的screen作业。</li>
<li>-ls或--list 　显示目前所有的screen作业。</li>
<li>-wipe 　检查目前所有的screen作业，并删除已经无法使用的screen作业。</li>
</ul>
<h4 id="常用screen参数">常用screen参数</h4>
<ul>
<li>screen -S yourname -&gt; 新建一个叫yourname的session</li>
<li>screen -ls -&gt; 列出当前所有的session</li>
<li>screen -r yourname -&gt; 回到yourname这个session</li>
<li>screen -d yourname -&gt; 远程detach某个session</li>
<li>screen -d -r yourname -&gt; 结束当前session并回到yourname这个session</li>
</ul>
<h4 id="保持我们的mc服务会话">保持我们的MC服务会话</h4>
<ul>
<li>新建一个screen会话</li>
</ul>
<pre><code>screen -S mcs
</code></pre>
<p>当输入这个命令后，就会进入 <strong>mcs</strong> 会话，在当前会话下，输入上面的启动脚本命令，确认游戏正常启动后，就可以放着不管了，只要不是服务器挂掉了，服务就会一直运行着。</p>
 </p>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-12 animate-box">
                        
                            <div class="next-post">
                                <div class="next">下一篇</div>
                                <a href="https://www.zhangajian.com/post/mac-xia-po-jie-beyond-compare/">
                                    <h3 class="post-title">
                                        Mac下破解Beyond Compare
                                    </h3>
                                </a>
                            </div>
                        
                    </div>
                </div>

                <div class="row">
    <div class="col-md-12 animate-box">
        
            
                <div id="gitalk-container"></div>
            

            
        
    </div>
</div>

            </div>

        </article>
    </div>
</div>

    

    <!-- 返回顶部 -->
    <div class="back-to-top">
    
        <a href="#!" id="tool-toc" class="hidden-xs hidden-sm">
            <i class="fa fa-map"></i>
        </a>
        <br>
    
    <a href="#top" class="hidden-xs hidden-sm"><i class="fa fa-paper-plane"></i></a>
</div>

<div class="post-toc animated fadeInRight hidden-xs hidden-sm" style="display: none;">
    <ul class="markdownIt-TOC">
<li><a href="#%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82">系统要求</a></li>
<li><a href="#%E5%AE%89%E8%A3%85java">安装Java</a></li>
<li><a href="#%E4%B8%8B%E8%BD%BDmc%E6%9C%8D%E5%8A%A1%E5%99%A8%E7%AB%AF">下载MC服务器端</a></li>
<li><a href="#mc%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%AF%E5%8A%A8">MC服务器，启动！</a></li>
<li><a href="#%E5%90%AF%E5%8A%A8%E6%88%90%E5%8A%9F">启动成功</a></li>
<li><a href="#mcshell%E8%84%9A%E6%9C%AC%E5%90%AF%E5%8A%A8">MC，Shell脚本启动！</a></li>
<li><a href="#mc%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%85%B3%E9%97%AD">MC服务器，关闭！</a></li>
<li><a href="#mc%E6%9C%8D%E5%8A%A1%E8%B5%B7%E6%9C%80%E5%B8%B8%E8%A7%81%E7%9A%84%E5%90%AF%E5%8A%A8%E5%A4%B1%E8%B4%A5">MC服务起最常见的启动失败</a></li>
<li><a href="#%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%BF%9E%E6%8E%A5mc%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%A4%B1%E8%B4%A5">客户端连接MC服务器失败</a></li>
<li><a href="#%E4%BF%9D%E6%8C%81%E6%9C%8D%E5%8A%A1%E4%BC%9A%E8%AF%9D">保持服务会话</a><br>
*<br>
*<br>
* <a href="#%E5%AE%89%E8%A3%85-screen">安装 screen</a><br>
* <a href="#%E8%AF%AD%E6%B3%95">语法：</a><br>
* <a href="#%E5%B8%B8%E7%94%A8screen%E5%8F%82%E6%95%B0">常用screen参数</a><br>
* <a href="#%E4%BF%9D%E6%8C%81%E6%88%91%E4%BB%AC%E7%9A%84mc%E6%9C%8D%E5%8A%A1%E4%BC%9A%E8%AF%9D">保持我们的MC服务会话</a></li>
</ul>

</div>


    
<footer id="fh5co-footer">
  <p>Powered by <a target="_blank" href="https://gridea.dev/">Gridea</a>, © 2016 - 2019 Copyright 张阿简. All Rights Reserved. 主题<a target="_blank" href="https://github.com/GalaxySuze/gridea-theme-space">Space For Gridea</a></p>
</footer>


    <!-- jQuery -->
<script src="https://www.zhangajian.com/media/scripts/jquery.min.js"></script>
<!-- img lazy load -->
<script src="https://www.zhangajian.com/media/scripts/jquery.lazyload.min.js"></script>
<!-- jQuery Easing -->
<script src="https://www.zhangajian.com/media/scripts/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="https://www.zhangajian.com/media/scripts/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="https://www.zhangajian.com/media/scripts/jquery.waypoints.min.js"></script>
<!-- Main JS -->
<script src="https://www.zhangajian.com/media/scripts/main.js"></script>
<!-- Md5 Min JS -->
<script src="https://www.zhangajian.com/media/scripts/md5.min.js"></script>
<!-- katex -->
<!--<script src="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.js"></script>-->
<!-- highlight -->
<script src="https://cdn.bootcss.com/highlight.js/9.15.8/highlight.min.js"></script>


<script type="application/javascript">
    // 代码高亮
    hljs.initHighlightingOnLoad();

    // img 懒加载
    $(function () {
        $("img.lazy").lazyload({
            effect: "fadeIn",  // 懒加载动画
            threshold: 180  // 在图片距离屏幕180px时提前载入
        });
        // tooltip
        $('[data-toggle="tooltip"]').tooltip();

        // 目录
        $('#tool-toc').click(function () {
            $('.post-toc').toggle();
        });
    });

    
        var allImg = $("img");
        allImg.on("contextmenu", function () {
            return false;
        });
        allImg.on("dragstart", function () {
            return false;
        });
    
</script>



    
        <script src="https://cdn.bootcss.com/gitalk/1.5.0/gitalk.min.js"></script>
        <script>

            var gitalk = new Gitalk({
                clientID: 'f82af725bc4967d0e195',
                clientSecret: 'ea48b3d1484e6658649b97c3de3dd33e0ca89a64',
                repo: 'ZhangAJianBlogGitalk',
                owner: 'GalaxySuze',
                admin: ['GalaxySuze'],
                id: md5(location.pathname),      // Ensure uniqueness and length less than 50
                distractionFreeMode: false  // Facebook-like distraction free mode
            })

            gitalk.render('gitalk-container')

        </script>
    

    




</body>
</html>
