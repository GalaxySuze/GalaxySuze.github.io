<html>
  <head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>在Linux下搭建我的世界(Minecraft)服务器 | 张阿简的博客</title>
<link rel="shortcut icon" href="/favicon.ico">
<link rel="stylesheet" href="/styles/main.css">

<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="">
  <img class="avatar" src="/images/avatar.png" alt="" width="80px" height="80px">
  </a>
  <h1 class="site-title">
    张阿简的博客
  </h1>
  <p class="site-description">
    Kill Time, Or Kiss Time
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于
        </a>
      
    
  </div>
</div>

      
        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              在Linux下搭建我的世界(Minecraft)服务器
            </h2>
            <div class="post-info">
              <time class="post-time">
                · 2018-12-21 ·
              </time>
              
                <a href="/tag/2Lrsz8nQ5" class="post-tags">
                  # Java
                </a>
              
                <a href="/tag/linux" class="post-tags">
                  # Linux
                </a>
              
                <a href="/tag/Q1TPBCeTZ" class="post-tags">
                  # Minecraft
                </a>
              
                <a href="/tag/screen" class="post-tags">
                  # screen
                </a>
              
                <a href="/tag/wa6VE0See" class="post-tags">
                  # 原创
                </a>
              
            </div>
            <div class="post-content">
              <blockquote>
<p>最近薅了百度云双12的羊毛，1核2G一年150。突然想起以前大学整个宿舍通宵开黑挖泥土的岁月，所以刚好趁着这台服务器，打算自己搭建一个我的世界服务器，重温一下以前的感觉。</p>
</blockquote>
<!-- more -->
<h1 id="系统要求">系统要求</h1><p>google到的MC系统要求:</p>
<ul>
<li>CPU：双核</li>
<li>内存：20-40人<strong>2GB</strong>，30-60人<strong>3GB</strong>，60+人<strong>8GB</strong></li>
</ul>
<p>上面就是服务器端的需求，如果只是和小伙伴们一起玩，也并不需要多优秀的服务器。下面是我的配置：</p>
<ul>
<li>CPU：单核</li>
<li>内存：2G</li>
<li>Linux系统：CentOS 7.3 x86_64</li>
</ul>
<h1 id="安装java">安装Java</h1><p>MC是用Java写的（当然现在也有别的语言写的版本），由于服务器端的MC是一个jar包，我们在配置之后通过运行jar包来开启服务器端，同时我们在客户端上打开后通过IP地址即可搜索并进入服务器。所以我们首先要先安装Java。通过下面的方法来安装：</p>
<pre><code class="language-shell">yum install -y java-1.8.0-openjdk</code></pre>
<h1 id="下载mc服务器端">下载MC服务器端</h1><p>这里有一个要求，就是你和你的小伙伴要拥有同样版本的MC。不同的版本对应着不同的服务器端，所以我们要下载正确的版本。如何看MC版本呢，一般进入游戏后，游戏左下角会有版本显示。知道了版本号，那么用命令就可以下载对应版本的服务器端了。需要根据版本号补全命令格式：</p>
<pre><code class="language-shell">wget https://s3.amazonaws.com/Minecraft.Download/versions/&lt;你要下载的版本号&gt;/minecraft_server.&lt;你要下载的版本号&gt;.jar
</code></pre>
<p>例子：博主这边选择安装了比较稳定的1.12版本</p>
<pre><code class="language-shell">wget https://s3.amazonaws.com/Minecraft.Download/versions/1.12/minecraft_server.1.12.jar</code></pre>
<p>等下载提示结束后，minecraft_server.1.12.jar就躺在当前目录了。</p>
<h1 id="mc服务器，启动！">MC服务器，启动！</h1><p>我们就可以使用命令来运行MC服务器：</p>
<pre><code class="language-shell">java -Xms[初始启动分配内存] -Xmx[最大分配内存] -jar [jar包所在路径]/minecraft_server.[版本号].jar nogui</code></pre>
<p>例子：</p>
<pre><code class="language-shell">java -Xms256m -Xmx512m -jar /home/mc/minecraft_server.1.12.jar nogui</code></pre>
<blockquote>
<p>关于命令最后一个参数 nogui，是分开的单词 no gui，意思是不需要图形界面，这样会大大减小内存的使用，如果你的Linux是有图形界面的，就可以不打这个 nogui。</p>
</blockquote>
<h1 id="启动成功">启动成功</h1><p>上面的命令输入完成后，等待参数由0%一直到100%就启动完成啦！下面给出博主启动完成的后几行显示：</p>
<pre><code class="language-shell">[05:58:08] [Server thread/INFO]: Loaded 488 advancements
[05:58:08] [Server thread/INFO]: Preparing start region for level 0
[05:58:09] [Server thread/INFO]: Preparing spawn area: 0%
[05:58:10] [Server thread/INFO]: Preparing spawn area: 41%
[05:58:11] [Server thread/INFO]: Preparing spawn area: 76%
[05:58:11] [Server thread/INFO]: Done (4.263s)! For help, type &quot;help&quot; or &quot;?&quot;</code></pre>
<h1 id="mc，shell脚本启动！">MC，Shell脚本启动！</h1><p>我们如果一直使用上面那一句启动的话是不是非常麻烦！每次都要复制粘贴，那么我们可以写一个简单的Shell脚本，放在jar包所在目录，每次启动的时候直接启动脚本就能进入游戏了。</p>
<pre><code class="language-shell">vim start-game.sh</code></pre>
<p>编辑内容如下：</p>
<pre><code class="language-vim">#!/bin/sh

java -Xms256m -Xmx512m -jar /home/mc/minecraft_server.1.12.jar nogui</code></pre>
<p>保存退出，每次启动游戏只需要运行下面命令即可:</p>
<pre><code class="language-shell">bash start-game.sh</code></pre>
<h1 id="mc服务器，关闭！">MC服务器，关闭！</h1><p>按 Ctrl + C 来停止当前服务器</p>
<h1 id="mc服务起最常见的启动失败">MC服务起最常见的启动失败</h1><p>我们在第一次运行完jar包后，无论是否运行成功，都能发现当前目录下多出了一堆文件，运行失败的时候其实就是配置除了一点问题。我们在当前目录找一下文件：<strong>eula.txt</strong></p>
<pre><code class="language-shell">vim eula.txt</code></pre>
<p>按i键进入编辑模式，找到如下一行把 <strong>false</strong> 改为 <strong>true</strong></p>
<pre><code class="language-vim">eula=false</code></pre>
<p>保存退出</p>
<ul>
<li>按 <strong>esc</strong></li>
<li>输入 <strong>:wq</strong></li>
</ul>
<h1 id="客户端连接mc服务器失败">客户端连接MC服务器失败</h1><p>上面都启动成功之后，就可以下载对应服务器版本的客户端。下载好后启动，点击多人游戏，添加服务器，服务器地址输入我们云服务器的公网IP，就可连接上去愉快的玩耍了。但是这时候可能会发现就是怎么连接都失败，如果遇到这个情况，我们需要检查下服务器配置文件，先在jar包目录下找到文件server.propertices 并编辑：</p>
<pre><code class="language-shell">vim server.propertices</code></pre>
<p>找到这一行</p>
<pre><code class="language-vim">online-mode:true</code></pre>
<p>将true改为false，这是正版验证服务的设置<br>关于 <strong>server.propertices</strong> 文件，这边就不多做介绍了，可通过下面的链接了解详情</p>
<ul>
<li><a href="http://www.mcbbs.net/thread-569077-1-1.html">服务器配置文件详细设置</a></li>
<li><a href="https://minecraft-zh.gamepedia.com/Server.properties">我的世界WiKi</a></li>
</ul>
<h1 id="保持服务会话">保持服务会话</h1><p>因为博主用的是云服务器，需要通过使用ssh工具来连接到服务器启动游戏服务，但是一般服务器和ssh工具都会有连接会话的超时设置，在一段时间没有在服务器上操作后，会自动断开ssh会话，这时这个会话中的任务就会被杀掉，那小伙伴们游戏玩着玩着就<strong>与服务器断开连接</strong>了。<br>这个时候我们可以使用Linux上这个 <strong>GNU Screen</strong> 工具来解决上述问题</p>
<blockquote>
<p>GNU Screen是一款由GNU计划开发的用于命令行终端切换的自由软件。用户可以通过该软件同时连接多个本地或远程的命令行会话，并在其间自由切换。GNU Screen可以看作是窗口管理器的命令行界面版本。它提供了统一的管理多个会话的界面和相应的功能。</p>
</blockquote>
<h4 id="安装 screen">安装 screen</h4><pre><code class="language-shell">yum install -y screen</code></pre>
<h4 id="语法：">语法：</h4><p>screen [-AmRvx -ls -wipe][-d &lt;作业名称&gt;][-h &lt;行数&gt;][-r &lt;作业名称&gt;][-s ][-S &lt;作业名称&gt;]</p>
<p>参数说明</p>
<ul>
<li>-A 　将所有的视窗都调整为目前终端机的大小。</li>
<li>-d &lt;作业名称&gt; 　将指定的screen作业离线。</li>
<li>-h &lt;行数&gt; 　指定视窗的缓冲区行数。</li>
<li>-m 　即使目前已在作业中的screen作业，仍强制建立新的screen作业。</li>
<li>-r &lt;作业名称&gt; 　恢复离线的screen作业。</li>
<li>-R 　先试图恢复离线的作业。若找不到离线的作业，即建立新的screen作业。</li>
<li>-s 　指定建立新视窗时，所要执行的shell。</li>
<li>-S &lt;作业名称&gt; 　指定screen作业的名称。</li>
<li>-v 　显示版本信息。</li>
<li>-x 　恢复之前离线的screen作业。</li>
<li>-ls或--list 　显示目前所有的screen作业。</li>
<li>-wipe 　检查目前所有的screen作业，并删除已经无法使用的screen作业。</li>
</ul>
<h4 id="常用screen参数">常用screen参数</h4><ul>
<li>screen -S yourname -&gt; 新建一个叫yourname的session</li>
<li>screen -ls -&gt; 列出当前所有的session</li>
<li>screen -r yourname -&gt; 回到yourname这个session</li>
<li>screen -d yourname -&gt; 远程detach某个session</li>
<li>screen -d -r yourname -&gt; 结束当前session并回到yourname这个session</li>
</ul>
<h4 id="保持我们的mc服务会话">保持我们的MC服务会话</h4><ul>
<li>新建一个screen会话<pre><code class="language-shell">screen -S mcs</code></pre>
当输入这个命令后，就会进入 <strong>mcs</strong> 会话，在当前会话下，输入上面的启动脚本命令，确认游戏正常启动后，就可以放着不管了，只要不是服务器挂掉了，服务就会一直运行着。</li>
</ul>

            </div>
          </article>
        </div>
    
        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="/post/mac-xia-po-jie-beyond-compare">
              <h3 class="post-title">
                Mac下破解Beyond Compare
              </h3>
            </a>
          </div>  
        

        
    
        <div class="site-footer">
  Powered by Hve Notes, © 2017 - 2019 Copyright 张阿简. All Rights Reserved.
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

      </div>
    </div>
  </body>
</html>
